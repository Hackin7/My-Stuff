<h1>Caged Up</h1>
<p>700, WEB SERVICES, 32 SOLVES</p>
<h2>Description</h2>
<p>Having accessed the database, the attacker modified the promotion banner for a product sold on ShoppingBaba, preventing the promo code from being revealed! The promo code can be found on the website http://p7ju6oidw6ayykt9zeglwyxired60yct.ctf.sg:8181 Can you find out what was the promo code?</p>
<p>NOTE: You do not have to compromise/pen-test the webserver</p>
<h1>Solution</h1>
<p>Here's a basic inspection of the page
<img alt="HTML" src="1_HTML.png" /></p>
<p><img alt="Phaser I think" src="1_Libraries.png" /></p>
<p><img alt="Javascript" src="1_Secret.png" /></p>
<p>Observations
1. It is client side javascript (at least I didn't find networking functions or stuff in the files)
2. To be more specific, it's using a Javascript game-making library called Phaser.
3. The code's obfuscated with single character variable names (yay to ~~poor~~ competitive programming practices)
4. The basic idea is to move down to access the flag, as hinted by the text below <code>Promo code is below</code> (It's in the images below)</p>
<p>I had no idea how to continue, and I'm not going to read up on the entirety of Phaser documentation, or reverse engineer the code step by step. Hence, I just checked out the local variables to hope I luck out and run into some powerful cheat code or something.</p>
<p>On checking out the Javascript with the Chrome Dev Tools Console, you can notice many variables. Of course, their name's aren't meaningful, but hey this is something I can look into.</p>
<p><img alt="" src="2.png" /></p>
<p>I checked the contents of the variables with the console. One of these variables, <code>escape_v</code> has promise, as it seemed quite long.
<img alt="" src="3.png" /></p>
<p>In particular, 2 properties of <code>escape_v</code>, <code>children</code> and <code>hash</code> had a list of <code>e.Sprite</code>, which could represent the walls/ enemies.
<img alt="" src="4.png" />
<img alt="" src="5.png" />
<img alt="" src="6.png" /></p>
<p>Upon tinkering around with the <code>children property</code>, all the elements are removed. The player character is gone, and you can't move the camera with the joystick/ arrow keys either.
<img alt="" src="7.png" /></p>
<p>Let's try tinkering with the <code>hash</code> property next, clearing all sprites.
<img alt="" src="8.png" /></p>
<p>Now we can move around. And yeah here's the flag.
<img alt="" src="9.png" />
<img alt="" src="10.png" />
<img alt="" src="11.png" /></p>
<h2>Alternative Solution</h2>
<p>From what I heard in the discord chat, there's a variable <code>bmpText</code> with the flag
<img alt="" src="12.png" />
<img alt="" src="13.png" /></p>
<h1>Flag</h1>
<p><code>Cyberthon{client_side_javascript_cant_cage_me_up}</code></p>